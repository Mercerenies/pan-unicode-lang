{
  "version": 3,
  "file": "unicode_input.js",
  "sourceRoot": "..",
  "sources": [
    "src/unicode_input.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport { spliceStr } from './util.js'\n\nexport class InputManager\n\n  constructor: () ->\n    @element = null\n    @handler = null\n    @downHandler = null\n    @translations = compileTranslationTable DEFAULT_TRANSLATION_TABLE\n    @currentTranslation = null\n    @currentString = \"\"\n    @currentPosition = 0\n\n  register: (element) ->\n    if @element?\n      this.unregister()\n    @element = element\n    @handler = (event) => this.onInput(event)\n    @downHandler = (event) => this.onKeyDown(event)\n    element.addEventListener('input', @handler)\n    element.addEventListener('keypress', @downHandler)\n    element.addEventListener('keydown', @downHandler)\n\n  unregister: () ->\n    if @element?\n      @element.removeEventListener('input', @handler)\n      @element.removeEventListener('keypress', @downHandler)\n      @element.removeEventListener('keydown', @downHandler)\n      @element = null\n      @handler = null\n      @downHandler = null\n\n  onKeyDown: (event) ->\n    if event.isComposing or event.keyCode == 229\n      # MDN says to do this :)\n      return\n    if event.keyCode == 13 and event.shiftKey\n      document.querySelector(\"#run-button\").click()\n      event.preventDefault()\n\n  onInput: (event) ->\n    if event.inputType == \"insertText\"\n      resolution = 0\n      tryToResolve = =>\n        return if resolution > 2\n        resolution += 1\n        if @currentTranslation == null\n          @currentTranslation = @translations\n          @currentPosition = event.target.selectionStart - 1\n        next = @currentTranslation[event.data]\n        @currentString += event.data\n        switch\n          when @currentPosition != event.target.selectionStart - 1\n            @currentTranslation = null\n            @currentString = \"\"\n            tryToResolve()\n          when typeof(next) == 'object'\n            if next[END]?\n              term = next[END]\n              @currentPosition = event.target.selectionStart\n              event.target.value =\n                spliceStr(event.target.value, term, @currentPosition - @currentString.length, @currentPosition)\n              event.target.selectionStart = @currentPosition - @currentString.length + term.length\n              event.target.selectionEnd = event.target.selectionStart\n              @currentString = term\n            @currentTranslation = next\n          else\n            @currentTranslation = null\n            @currentString = \"\"\n            tryToResolve()\n        @currentPosition = event.target.selectionStart\n      tryToResolve()\n    else\n      # In any other case, cancel the current translation\n      @currentTranslation = null\n      @currentString = \"\"\n\nexport END = Symbol(\"END\")\n\nexport compileTranslationTable = (table) ->\n  result = {}\n  for k, v of table\n    curr = result\n    for ch in k\n      curr[ch] ?= {}\n      curr = curr[ch]\n    curr[ END ] = v\n  result\n\nexport DEFAULT_TRANSLATION_TABLE =\n  \"\\\\o\": \"ø\"\n  \".-\": \"×\"\n  \"\\\\times\": \"×\"\n  \"\\\\x\": \"×\"\n  \".=\": \"÷\"\n  \"\\\\div\": \"÷\"\n  \"\\\\division\": \"÷\"\n  \".0\": \"∧\"\n  \"\\\\and\": \"∧\"\n  \"\\\\wedge\": \"∧\"\n  \".9\": \"∨\"\n  \"\\\\or\": \"∨\"\n  \"\\\\vee\": \"∨\"\n  \"\\\\.and\": \"⩑\"\n  \"\\\\.wedge\": \"⩑\"\n  \"\\\\lcm\": \"⩑\"\n  \"\\\\.or\": \"⩒\"\n  \"\\\\.vee\": \"⩒\"\n  \"\\\\gcd\": \"⩒\"\n  \"\\\\neg\": \"¬\"\n  \"\\\\lnot\": \"¬\"\n  \"\\\\o+\": \"⊕\"\n  \"\\\\oplus\": \"⊕\"\n  \"\\\\ox\": \"⊗\"\n  \"\\\\otimes\": \"⊗\"\n  \".7\": \"<\"\n  \".3\": \">\"\n  \".4\": \"≤\"\n  \"\\\\le\": \"≤\"\n  \"\\\\leq\": \"≤\"\n  \".6\": \"≥\"\n  \"\\\\ge\": \"≥\"\n  \"\\\\geq\": \"≥\"\n  \".8\": \"≠\"\n  \"\\\\ne\": \"≠\"\n  \"\\\\neq\": \"≠\"\n  \"._\": \"≡\"\n  \"\\\\equiv\": \"≡\"\n  \"\\\\eq\": \"≡\"\n  \"\\\\==\": \"≡\"\n  \".\\\"\": \"≢\"\n  \"\\\\nequiv\": \"≢\"\n  \"\\\\eqn\": \"≢\"\n  \"\\\\==n\": \"≢\"\n  \"\\\\fw\": \"⚐\"\n  \"\\\\epsilon\": \"ε\"\n  \"\\\\Ge\": \"ε\"\n  \"\\\\fb\": \"⚑\"\n  \".i\": \"⍳\"\n  \"\\\\iota\": \"⍳\"\n  \"\\\\Gi\": \"⍳\"\n  \".I\": \"⍸\"\n  \"\\\\iota_\": \"⍸\"\n  \"\\\\Gi_\": \"⍸\"\n  \".r\": \"⍴\"\n  \"\\\\rho\": \"⍴\"\n  \"\\\\Gr\": \"⍴\"\n  \".[\": \"←\"\n  \"\\\\<-\": \"←\"\n  \"\\\\leftarrow\": \"←\"\n  \"\\\\l-\": \"←\"\n  \"\\\\l\": \"←\"\n  \".]\": \"→\"\n  \"\\\\->\": \"→\"\n  \"\\\\rightarrow\": \"→\"\n  \"\\\\r-\": \"→\"\n  \"\\\\r\": \"→\"\n  \"\\\\to\": \"→\"\n  \"./\": \"⌿\"\n  \"\\\\filter\": \"⌿\"\n  \".1\": \"¨\"\n  \"\\\\map\": \"¨\"\n  \"\\\\\\\"\": \"¨\"\n  \"\\\\\\\"{}\": \"¨\"\n  \".e\": \"∈\"\n  \"\\\\in\": \"∈\"\n  \"\\\\member\": \"∈\"\n  \"\\\\ell\": \"ℓ\"\n  \"\\\\.e\": \"ė\"\n  \"\\\\.{e}\": \"ė\"\n  \"\\\\^e\": \"ê\"\n  \"\\\\^{e}\": \"ê\"\n  \"\\\\=i\": \"ī\"\n  \"\\\\id\": \"ī\"\n  \"\\\\nop\": \"ī\"\n  \"\\\\={i}\": \"ī\"\n  \"\\\\tree\": \"🌳\"\n  \"\\\\log\": \"🌳\"\n  \"\\\\ln\": \"🌳\"\n  \"\\\\surd\": \"√\"\n  \"\\\\sqrt\": \"√\"\n  \"\\\\cib\": \"●\"\n  \"\\\\curry\": \"●\"\n  \"\\\\ciw\": \"○\"\n  \"\\\\compose\": \"○\"\n  \"\\\\cis\": \"◐\"\n  \"\\\\sin\": \"◐\"\n  \"\\\\cias\": \"◑\"\n  \"\\\\asin\": \"◑\"\n  \"\\\\cic\": \"◒\"\n  \"\\\\cos\": \"◒\"\n  \"\\\\ciac\": \"◓\"\n  \"\\\\acos\": \"◓\"\n  \"\\\\cit\": \"◔\"\n  \"\\\\tan\": \"◔\"\n  \"\\\\ciat\": \"◕\"\n  \"\\\\atan\": \"◕\"\n  \"\\\\cish\": \"◖\"\n  \"\\\\sinh\": \"◖\"\n  \"\\\\ciash\": \"◗\"\n  \"\\\\asinh\": \"◗\"\n  \"\\\\cich\": \"◌\"\n  \"\\\\cosh\": \"◌\"\n  \"\\\\ciach\": \"◍\"\n  \"\\\\acosh\": \"◍\"\n  \"\\\\cith\": \"◎\"\n  \"\\\\tanh\": \"◎\"\n  \"\\\\ciath\": \"◉\"\n  \"\\\\atanh\": \"◉\"\n  \"\\\\r-2\": \"⇉\"\n  \"\\\\rightrightarrows\": \"⇉\"\n  \"\\\\r\\\\/\": \"⤨\"\n  \"\\\\r/\\\\\": \"⤨\"\n  \"\\\\udr\": \"⤨\"\n  \"\\\\dur\": \"⤨\"\n  \"\\\\ur\": \"↗\"\n  \"\\\\ur-\": \"↗\"\n  \"\\\\nearrow\": \"↗\"\n  \"\\\\dr\": \"↘\"\n  \"\\\\dr-\": \"↘\"\n  \"\\\\searrow\": \"↘\"\n  \".`\": \"⋄\"\n  \"\\\\dio\": \"⋄\"\n  \"\\\\diamond\": \"⋄\"\n  \"\\\\speech\": \"💬\"\n  \"\\\\chr\": \"💬\"\n  \"\\\\ord\": \"💬\"\n  \"\\\\scroll\": \"📜\"\n  \"\\\\read\": \"📜\"\n  \"\\\\book\": \"📖\"\n  \"\\\\readln\": \"📖\"\n  \"\\\\books\": \"📚\"\n  \"\\\\readall\": \"📚\"\n  \"\\\\slurp\": \"📚\"\n  \".X\": \"⊇\"\n  \"\\\\sup=\": \"⊇\"\n  \"\\\\supseteq\": \"⊇\"\n  \"\\\\supseteqq\": \"⊇\"\n  \".Z\": \"⊆\"\n  \"\\\\sub=\": \"⊆\"\n  \"\\\\subseteq\": \"⊆\"\n  \"\\\\subseteqq\": \"⊆\"\n  \".x\": \"⊃\"\n  \"\\\\sup\": \"⊃\"\n  \"\\\\supset\": \"⊃\"\n  \"\\\\supset\": \"⊃\"\n  \".z\": \"⊂\"\n  \"\\\\sub\": \"⊂\"\n  \"\\\\subset\": \"⊂\"\n  \"\\\\subset\": \"⊂\"\n  \".$\": \"⍋\"\n  \"\\\\gradeup\": \"⍋\"\n  \"\\\\sort\": \"⍋\"\n  \"\\\\forkandknife\": \"🍴\"\n  \"\\\\chomp\": \"🍴\"\n  \".<\": \"⍪\"\n  \"\\\\ravel\": \"⍪\"\n  \"\\\\flatten\": \"⍪\"\n  \"\\\\?\": \"¿\"\n  \"?`\": \"¿\"\n  \"r`\": \"ɹ\"\n  \"\\\\r`\": \"ɹ\"\n  \"\\\\rev\": \"ɹ\"\n  \"\\\\reverse\": \"ɹ\"\n  \"\\\\::\": \"∷\"\n  \".s\": \"⌈\"\n  \"\\\\lceil\": \"⌈\"\n  \"\\\\cul\": \"⌉\"\n  \"\\\\rceil\": \"⌉\"\n  \"\\\\cur\": \"⌉\"\n  \".d\": \"⌊\"\n  \"\\\\lfloor\": \"⌊\"\n  \"\\\\cll\": \"⌊\"\n  \"\\\\cl\": \"⌊\"\n  \"\\\\rfloor\": \"⌋\"\n  \"\\\\clr\": \"⌋\"\n  \"\\\\cr\": \"⌋\"\n  \"\\\\inf\": \"∞\"\n  \"\\\\infty\": \"∞\"\n  \"\\\\infinity\": \"∞\"\n  \"\\\\nan\": \"👿\"\n  \"\\\\devil\": \"👿\"\n  \"\\\\pi\": \"π\"\n  \"\\\\tau\": \"τ\"\n  \"\\\\Gt\": \"τ\"\n  \"\\\\Tl\": \"◁\"\n  \"\\\\triangleleft\": \"◁\"\n  \"\\\\take\": \"◁\"\n  \"\\\\takel\": \"◁\"\n  \"\\\\Tr\": \"▷\"\n  \"\\\\triangleright\": \"▷\"\n  \"\\\\taker\": \"▷\"\n  \"\\\\Tlb\": \"⧏\"\n  \"\\\\triangleleftbar\": \"⧏\"\n  \"\\\\drop\": \"⧏\"\n  \"\\\\dropl\": \"⧏\"\n  \"\\\\Trb\": \"⧐\"\n  \"\\\\dropr\": \"⧐\"\n  \"\\\\Trianglerightbar\": \"⧐\"\n  \"\\\\triangleleftblack\": \"◂\"\n  \"\\\\takew\": \"◂\"\n  \"\\\\takewl\": \"◂\"\n  \"\\\\tr\": \"▸\"\n  \"\\\\trianglerightblack\": \"▸\"\n  \"\\\\takewr\": \"▸\"\n  \"\\\\tlb\": \"◄\"\n  \"\\\\Triangleleftblack\": \"◄\"\n  \"\\\\dropw\": \"◄\"\n  \"\\\\dropwl\": \"◄\"\n  \"\\\\trb\": \"►\"\n  \"\\\\dropwr\": \"►\"\n  \"\\\\Trianglerightblack\": \"►\"\n  \"\\\\scream\": \"😱\"\n  \"\\\\throw\": \"😱\"\n  \"\\\\panic\": \"😱\"\n  \"\\\\error\": \"😱\"\n  \"\\\\pray\": \"🙏\"\n  \"\\\\prayer\": \"🙏\"\n  \"\\\\catch\": \"🙏\"\n  \"\\\\except\": \"🙏\"\n  \"\\\\handle\": \"🙏\"\n  \"\\\\empty\": \"🗋\"\n  \"\\\\blank\": \"🗋\"\n  \"\\\\paragraph\": \"¶\"\n  \"\\\\P\": \"¶\"\n  \"\\\\pilcrow\": \"¶\"\n  \"\\\\split\": \"¶\"\n  \"\\\\P`\": \"⁋\"\n  \"\\\\rpilcrow\": \"⁋\"\n  \"\\\\worclip\": \"⁋\"\n  \"\\\\join\": \"⁋\"\n  \"\\\\\\\\\": \"\\\\\"\n  \"\\\\flqq\": \"«\"\n  \"\\\\\\\"<\": \"«\"\n  \"\\\\frqq\": \"»\"\n  \"\\\\\\\">\": \"»\"\n  \"\\\\varprime\": \"′\"\n  \"\\\\prime\": \"′\"\n  \"\\\\'\": \"′\"\n  \"\\\\(0)\": \"⓪\"\n  \"\\\\(1)\": \"①\"\n  \"\\\\(2)\": \"②\"\n  \"\\\\(3)\": \"③\"\n  \"\\\\(4)\": \"④\"\n  \"\\\\(5)\": \"⑤\"\n  \"\\\\(6)\": \"⑥\"\n  \"\\\\(7)\": \"⑦\"\n  \"\\\\(8)\": \"⑧\"\n  \"\\\\(9)\": \"⑨\"\n  \"\\\\(10)\": \"⑩\"\n  \"\\\\(11)\": \"⑪\"\n  \"\\\\(12)\": \"⑫\"\n  \"\\\\(13)\": \"⑬\"\n  \"\\\\(14)\": \"⑭\"\n  \"\\\\(15)\": \"⑮\"\n  \"\\\\(16)\": \"⑯\"\n  \"\\\\(17)\": \"⑰\"\n  \"\\\\(18)\": \"⑱\"\n  \"\\\\(19)\": \"⑲\"\n  \"\\\\(20)\": \"⑳\"\n  \"_0\": \"₀\"\n  \"_1\": \"₁\"\n  \"_2\": \"₂\"\n  \"_3\": \"₃\"\n  \"_4\": \"₄\"\n  \"_5\": \"₅\"\n  \"_6\": \"₆\"\n  \"_7\": \"₇\"\n  \"_8\": \"₈\"\n  \"_9\": \"₉\"\n  \"^0\": \"⁰\"\n  \"^1\": \"¹\"\n  \"^2\": \"²\"\n  \"^3\": \"³\"\n  \"^4\": \"⁴\"\n  \"^5\": \"⁵\"\n  \"^6\": \"⁶\"\n  \"^7\": \"⁷\"\n  \"^8\": \"⁸\"\n  \"^9\": \"⁹\"\n  \"1/\": \"⅟\"\n  \"1/4\": \"¼\"\n  \"1/2\": \"½\"\n  \"3/4\": \"¾\"\n  \"1/7\": \"⅐\"\n  \"1/9\": \"⅑\"\n  \"1/10 \": \"⅒\"\n  \"1/3\": \"⅓\"\n  \"2/3\": \"⅔\"\n  \"1/5\": \"⅕\"\n  \"2/5\": \"⅖\"\n  \"3/5\": \"⅗\"\n  \"4/5\": \"⅘\"\n  \"1/6\": \"⅙\"\n  \"5/6\": \"⅚\"\n  \"1/8\": \"⅛\"\n  \"3/8\": \"⅜\"\n  \"5/8\": \"⅝\"\n  \"7/8\": \"⅞\"\n  \"0/3\": \"↉\"\n"
  ]
}